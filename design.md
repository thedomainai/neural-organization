# Neural Organization — 設計編

> 本ドキュメントは Neural Organization の各レイヤーと横断的要素の詳細設計（具体例・定量モデル・技術的実装方針・インタラクションパターン）を定義する。概念・思想・戦略については [concept.md](concept.md) を参照。各要素のさらに詳細な設計思想は [docs/philosophy/](docs/philosophy/) を参照。

## 1. レイヤー別詳細設計

### 1.1 Layer 0: Perception（知覚）— 接続ツール群

Perception が「現実世界への接続」を担うとき、具体的には以下の 7 カテゴリのツール群との接続を意味する。

| カテゴリ | 対象ツール例 | 取得する情報 |
|---|---|---|
| コミュニケーション | Slack / Teams / LINE | 会話ログ、意思決定の記録、感情の温度感、暗黙の合意 |
| 顧客関係 | Salesforce / HubSpot / Zendesk | 商談、アカウント、サポートチケット、顧客満足度 |
| プロダクト開発 | GitHub / Jira / Linear | PR、イシュー、スプリント進捗、コードの品質指標 |
| マーケティング | Google Analytics / Mixpanel / CMS | PV、CVR、ユーザー行動、コンテンツパフォーマンス |
| 人事・組織 | HRMOS / SmartHR / Slack活動量 | 従業員状態、エンゲージメント、スキルマトリクス |
| ファイナンス | freee / Stripe / 管理会計ツール | 売上、MRR、キャッシュフロー、コスト構造 |
| 運用・インフラ | Datadog / AWS CloudWatch / PagerDuty | システム稼働状態、インシデント、パフォーマンス |

**設計上の原則:**

- ツールは手段であり目的ではない。特定ツールへの依存を設計の中心に置かず、「組織が知覚すべき現実の次元」（状態・活動・関係・変化）を不変の軸とする
- 接続は段階的かつ能動的。Reflection が検出した盲点に基づき、システム自身が「次に何に接続すべきか」を判断する
- 情報の粒度と鮮度はトレードオフ。重要性と変化速度に応じて取得頻度を動的に調整する（リアルタイム〜日次バッチ）

> 詳細: [docs/philosophy/tool-integration-design.md](docs/philosophy/tool-integration-design.md)

### 1.2 Layer 1: Understanding（理解）— エンティティモデル

Understanding が構築する「世界モデル」は、グラフ構造のエンティティとして実装される。以下に Customer エンティティの設計例を示す。

**Customer エンティティ:**

| 属性グループ | 内容 | 例 |
|---|---|---|
| 基本属性 | 企業名、業種、規模、契約プラン、契約開始日 | Acme Corp, SaaS, 50名, Enterprise, 2024-01 |
| 財務状態 | MRR、LTV、支払い遅延の有無、拡張余地 | MRR ¥500K、LTV ¥12M、遅延なし、拡張余地あり |
| 健全性メトリクス | 健全性スコア、利用頻度、機能活用率、NPS | 健全性 85、DAU 80%、機能活用 65%、NPS 45 |
| 行動状態 | 直近のログイン、機能利用傾向、利用時間帯 | 毎日ログイン、レポート機能を多用、午前中に集中 |
| サポート状態 | オープンチケット数、平均解決時間、問い合わせ傾向 | オープン 2件、平均解決 4h、API関連が多い |
| 関係性 | 担当者、意思決定者、チャンピオン、利用部門 | 担当: 田中、意思決定者: 鈴木CTO、チャンピオン: 佐藤 |
| シグナル | 直近の変化・イベント・アラート | 利用頻度が先月比 -20%、新機能への問い合わせ増加 |
| 因果リンク | この顧客の行動と結果の因果構造 | 「オンボーディング強化 → 機能活用率向上 → 健全性改善」の因果パス |

Customer 以外にも Deal（商談）、Product（プロダクト）、Employee（従業員）、Campaign（キャンペーン）、Market（市場）等のエンティティが同様の構造で定義される。これらのエンティティ間の関係性がグラフとして接続され、「生きた世界モデル」を形成する。

> 詳細: [docs/philosophy/layer1-understanding-design.md](docs/philosophy/layer1-understanding-design.md)

### 1.3 Layer 2: Reasoning（推論）— 領域横断構成の具体例

Reasoning の核心である「領域横断的な統合行動」がどのように機能するかを、定量的な例で示す。

**シナリオ: 顧客維持率の改善**

```
現状: 顧客維持率 88%（目標: 95%）
トレンド: 四半期ごとに -2pt で低下中
```

Reasoning は単一領域の施策ではなく、4 領域を横断した統合計画を構成する:

| 領域 | 施策 | 期待効果 | 根拠（Memory 参照） |
|---|---|---|---|
| CS | 健全性スコア 70 未満の顧客に proactive outreach | +3.0pt | 過去データ: 早期介入で解約率が 40% 低下 |
| プロダクト | 離脱原因上位 3 機能の UX 改善 | +2.5pt | 解約理由分析: UX 不満が 35% を占める |
| マーケティング | 成功事例コンテンツで既存顧客の活用促進 | +1.5pt | A/B テスト結果: 事例共有で活用率が 25% 向上 |
| 価格 | 長期契約へのインセンティブ設計の検討 | +1.0pt | 競合分析: 年間契約の維持率は月次比 +15pt |

**統合効果**: 4 領域の施策を組み合わせることで、合計 +8.0pt（88% → 96%）の改善を見込む。単一領域のみでは最大 +3.0pt にとどまる。

これが「流体的インテリジェンス」の具体的な発現である。従来の組織では CS 部門・プロダクト部門・マーケティング部門がそれぞれ独立に施策を立案するが、Neural Organization では **同時に・整合的に** 計画され、施策間の相互作用（たとえば UX 改善なしに outreach しても一時的効果にとどまる）も考慮される。

> 詳細: [docs/philosophy/layer2-reasoning-design.md](docs/philosophy/layer2-reasoning-design.md)

### 1.4 Layer 3: Execution（実行）— アーティファクトと品質保証

#### アーティファクト生成の 4 カテゴリ

| カテゴリ | 生成物の例 | 文脈の活用 |
|---|---|---|
| コミュニケーション | 顧客メール、社内通知、パートナー連絡、SNS 投稿 | 相手との関係性、過去の会話履歴、トーン・スタイルの学習結果を反映 |
| レポート・分析 | KPI レポート、市場分析、競合レポート、提案書 | 受け手の関心事と知識レベルに応じて粒度と切り口を調整 |
| コード・設定 | プロダクトコード、設定変更、インフラ構成、自動化スクリプト | コードベースの規約、アーキテクチャパターン、テスト要件を遵守 |
| データ操作 | DB 更新、外部 API 呼び出し、ファイル生成、ワークフロー起動 | 操作の不可逆性に応じた Governance Gate の適用 |

#### 品質保証の 4 段階チェック

Execution は出力前に 4 段階の品質チェックを行い、Governance Gate に到達する前にシステム内で品質を担保する（二重フィルタリング原則の実装）。

| 段階 | チェック内容 | 不合格時の処理 |
|---|---|---|
| 1. 基準適合 | ブランドガイドライン、フォーマット規定、文字数制限、用語統一 | 自動修正して再生成 |
| 2. 論理整合性 | 事実との整合性、数値の正確性、論理の一貫性、引用の正確性 | 問題箇所を特定して再生成 |
| 3. 安全性 | 法的リスク、機密情報の漏洩、倫理的問題、レピュテーションリスク | 即座にブロック、Governance にエスカレーション |
| 4. 最適化 | 受け手に合わせた表現、タイミング、チャネル、粒度の最適化 | 最適化案を適用して再生成 |

段階 1〜2 をパスしたもののみが段階 3〜4 に進み、すべてをパスしたもののみが Governance Gate（人間の判断）に到達する。人間は「品質の確認」ではなく「価値判断・倫理判断・戦略判断」に注意を集中できる。

> 詳細: [docs/philosophy/layer3-execution-design.md](docs/philosophy/layer3-execution-design.md)

### 1.5 Layer 4: Reflection（内省）— 学習の具体例

concept.md で定義した 5 種類の学習入力に加え、内省が各層にどのような具体的な更新を生むかを示す。

| # | 学習のトリガー | 内省の内容 | 更新される層と永続状態 |
|---|---|---|---|
| 1 | CS outreach メールの開封率が想定の半分 | 「メールチャネルが最適ではなかった可能性」を検出。顧客のコミュニケーション傾向を再分析 | → Perception: この顧客セグメントの Slack 活動を優先的に監視。→ Reasoning: チャネル選択の判断基準を更新 |
| 2 | 世界モデルが予測した商談成約が外れた | 因果モデル「担当者の関与度 → 成約率」の係数が実態と乖離していたことを特定 | → Understanding: 因果モデルの係数を修正。「競合の動向」を因果リンクに追加 |
| 3 | 4 領域統合施策のうち、価格施策の効果が他の 3 領域に比べて低い | 「長期契約インセンティブ」は顧客セグメントによって効果が大きく異なることを発見 | → Reasoning: セグメント別の施策テンプレートを生成。行動構成のパターンを更新 |
| 4 | 人間が提案メールの表現を「もう少し砕けた感じに」と修正 | 「この組織は顧客コミュニケーションにおいてカジュアルなトーンを好む」という暗黙の価値観を抽出 | → Memory（長期記憶）: コミュニケーションスタイルの判断基準として蓄積 |
| 5 | 「UX 改善 → 機能活用率向上 → 維持率改善」の因果チェーンが実証された | この因果パスの信頼度を引き上げ、類似パターンの汎用テンプレートを生成 | → Understanding: 因果モデルの信頼度を更新。→ Memory（長期記憶）: 成功パターンとして蓄積 |

特に重要なのは、**学習が単一層に閉じず、複数層を横断して更新を生む** ことである。例 1 では Perception と Reasoning の両方が更新され、例 5 では Understanding と Memory の両方が更新される。これが「全層を対象とした自己参照的内省」の具体的な姿である。

> 詳細: [docs/philosophy/layer4-reflection-design.md](docs/philosophy/layer4-reflection-design.md)

## 2. 横断的要素の詳細設計

### 2.1 Purpose（目的）— 4 要素の構造化

concept.md で定義した Purpose の 4 要素（Why / Where / How / Boundary）が、Reasoning の行動計画導出にどう作用するかを具体例で示す。

#### Why（存在目的）

```
定義: 顧客のビジネスを成功させることで、世界の生産性を向上させる
```

→ Reasoning への作用: すべての行動は「顧客の成功に貢献するか」が最終的な判断基準。短期的な自社利益と顧客の成功が矛盾する場合、顧客の成功を優先する。

#### Where（方向）

```
定義: 3年以内に、エンタープライズ顧客 100 社の組織知能を支える基盤になる
Outcome 1: 顧客維持率 95% 以上
Outcome 2: NPS 60 以上
Outcome 3: 顧客あたり年間コスト削減効果 ¥10M 以上
```

→ Reasoning への作用: 行動計画の優先度付けの基準。Outcome 1〜3 への貢献度で施策を評価・選択する。

#### How（価値観）— トレードオフの判断基準

```
トレードオフの重み付け:
  顧客満足: 70%
  短期収益: 30%

判断例: 顧客が機能を無料で要求した場合
  → 顧客満足（70%）と短期収益（30%）の重み付けに基づき、
    機能の開発コストが閾値以下なら無料提供を推奨する
```

→ Reasoning への作用: 選択肢間のトレードオフ評価において、この重み付けが判断の軸となる。人間が明示的に定義することで、システムは「この組織らしい」判断を自律的に行える。

#### Boundary（制約）

```
予算制約: 月次マーケティング予算 ¥5M 以内
法的制約: 個人情報の第三者提供は行わない
倫理的境界: 競合の機密情報を利用しない
運用境界: 顧客データの保存は国内リージョンのみ
```

→ Reasoning への作用: 行動計画の生成時に、これらの制約を違反する選択肢は自動的に除外される。Boundary の違反は Governance Gate ではなく、Reasoning の段階でブロックされる。

> 詳細: [docs/philosophy/purpose-design.md](docs/philosophy/purpose-design.md)

### 2.2 Governance（統治）— 信頼スコアモデル

#### 信頼スコアの算出

Governance Gate の閾値は「信頼の蓄積」に応じて動的に調整される。この信頼を定量化するのが信頼スコアである。

```
Trust Score = 成功率 × 0.30 + 結果品質 × 0.35 + 整合性 × 0.20 + リスク管理 × 0.15
```

| 因子 | 重み | 測定方法 |
|---|---|---|
| 成功率 | 0.30 | 自律実行した判断のうち、人間が後から覆さなかった割合 |
| 結果品質 | 0.35 | アウトプットが期待した結果を生んだ割合（Reflection で測定） |
| 整合性 | 0.20 | 行動が Purpose・Values・Boundary と整合していた割合 |
| リスク管理 | 0.15 | リスクの高い判断を適切にエスカレーションした割合 |

#### 信頼レベルと自律範囲

| レベル | Trust Score | 自律範囲 | Governance Gate の挙動 |
|---|---|---|---|
| Cold Start | 0.00 - 0.39 | 全判断に承認が必要 | すべての行動計画・アウトプットを人間が承認 |
| Learning | 0.40 - 0.69 | 定型的な判断は自律実行 | 影響度「小」の判断は自律実行。「中」以上は承認要求 |
| Trusted | 0.70 - 0.89 | 大半の判断は自律実行 | 影響度「大」または不可逆性「高」のみ承認要求 |
| Highly Trusted | 0.90 - 1.00 | 戦略的判断を含む広い自律 | 不可逆性「極めて高い」または前例のない判断のみ承認要求 |

**信頼は領域別に蓄積される。** CS 領域で Highly Trusted でも、財務領域では Cold Start の可能性がある。これにより、得意な領域では効率的に自律実行しつつ、不慣れな領域では慎重に行動する。

> 詳細: [docs/philosophy/governance-design.md](docs/philosophy/governance-design.md)

### 2.3 Memory（記憶）— 技術的実装方針

concept.md で定義した 3 つの記憶構造（長期記憶・作業記憶・評価記憶）それぞれに適切な技術スタックを対応させる。

| 記憶構造 | 時間軸 | 技術スタック | 選択理由 |
|---|---|---|---|
| 長期記憶（Institutional Memory） | 年〜永続 | グラフ DB（Neo4j, Amazon Neptune）+ ベクトル DB（Pinecone, Weaviate） | エンティティ間の関係性をグラフで保持し、セマンティック検索でパターンを想起する |
| 作業記憶（Working Memory） | 秒〜日 | インメモリキャッシュ（Redis）+ ドキュメントストア（MongoDB） | 高速なアクセスが必要。揮発的だが、重要な作業文脈は長期記憶に昇格する |
| 評価記憶（Evaluative Memory） | 週〜月 | 時系列 DB（TimescaleDB, InfluxDB）+ RDB（PostgreSQL） | KPI の推移と行動-結果の対応を時系列で蓄積し、Reflection が参照する |

#### 選択的忘却

人間の記憶と異なり、システムは「何を忘れるか」を能動的に設計できる。

- **作業記憶**: タスク完了後、文脈は要約されて長期記憶に昇格するか、忘却される
- **評価記憶**: 一定期間後、個別の行動-結果データは統計的パターンに集約される
- **長期記憶**: 原則として忘却しない。ただし、明示的に否定された知見（「この因果関係は誤りだった」）は信頼度を下げて保持する

#### 記憶の階層的抽象化

```
生のイベントログ → パターンの検出 → 原則の抽出 → 価値観の内面化
```

例: 「人間が 3 回連続でカジュアルなトーンに修正した」（イベント）→「顧客メールはカジュアルなトーンが好まれる」（パターン）→「コミュニケーションは親しみやすさを優先する」（原則）→「この組織は顧客との距離感を近く保つ文化である」（価値観）

> 詳細: [docs/philosophy/memory-design.md](docs/philosophy/memory-design.md)

### 2.4 Orchestration（統率）— フロー制御・リソース配分・優先度管理

#### フロー制御の 4 パターン

| パターン | 発動条件 | 例 |
|---|---|---|
| 並列実行 | 独立した複数タスクが同時に発生 | 顧客 A への outreach と顧客 B への提案書作成を同時実行 |
| ループバック | 後段の層が前段の修正を要求 | Execution が「情報不足」を検出 → Understanding に追加分析を要求 |
| スキップ | 中間層が不要な場合 | 既知のパターンに合致する場合、Understanding を経由せず Reasoning に直接進む |
| 条件分岐 | 判断の結果に応じてフローが分岐 | Governance Gate の結果が「承認」なら Execution へ、「差し戻し」なら Reasoning へ |

#### リソース配分の 3 戦略

| 戦略 | 適用条件 | ルール |
|---|---|---|
| 優先度ベース | 通常運用時 | 優先度スコアに基づいて計算リソース・API コール数を配分 |
| 期限対応 | デッドラインのあるタスク | 期限までの残り時間に応じてリソースを増減。期限切れリスクがあれば他タスクから借用 |
| 予算制約 | API コスト・計算コストが予算に接近 | コスト効率の高い処理を優先。低優先度タスクを一時停止 |

#### 優先度管理の重み付け

```
Priority Score = 緊急性 × 0.30 + 影響度 × 0.35 + 依存関係 × 0.20 + リソース効率 × 0.15
```

| 因子 | 重み | 評価基準 |
|---|---|---|
| 緊急性 | 0.30 | 対応までの猶予時間。即座の対応が必要か、数日の余裕があるか |
| 影響度 | 0.35 | Purpose の Outcome にどれだけ貢献するか。影響範囲の広さ |
| 依存関係 | 0.20 | 他のタスクがこのタスクの完了を待っているか。ブロッキングの度合い |
| リソース効率 | 0.15 | 投入リソースに対する期待効果の比率 |

> 詳細: [docs/philosophy/orchestration-design.md](docs/philosophy/orchestration-design.md)

## 3. 人間-インテリジェンス界面の設計

### 3.1 Interface の 5 つのモード

concept.md で定義した 6 つの設計原理（Intent over Instruction, Governance not Control, Ambient Presence, Radical Transparency, Agency Preservation, Mutual Evolution）を、具体的なインタラクションパターンとして実現する 5 つのモードを定義する。

#### Mode 1: Intent Interface（意志の伝達）

Governor が Purpose を注入し、方向性を示すためのモード。

```
[Governor]  顧客の成功を最も重視したい。特に、既存顧客の維持に注力したい。
[System]    承知しました。現在の顧客維持率は 88% です。
            「顧客維持率を 95% 以上に引き上げる」を Outcome として設定してよろしいですか？
            また、そのためのトレードオフとして、新規獲得への投資を一時的に抑制する
            可能性がありますが、許容範囲はどの程度ですか？
[Governor]  95% を目標にしよう。新規獲得は現状維持できればよい。
[System]    Purpose を更新しました。
            - Outcome: 顧客維持率 95% 以上
            - 制約: 新規獲得は現状水準を維持
            この Purpose に基づいて、全領域の行動計画を再構成します。
```

#### Mode 2: Governance Interface（統治）

Governance Gate に到達した判断を人間が審議するモード。

```
[System]    承認リクエスト: 価格改定の提案
            ─────────────────────────
            提案: Enterprise プランの年間契約に 15% のディスカウントを付与
            根拠: 年間契約の維持率は月次比 +15pt。200 社が対象で、
                  短期の月次収益 -8% と引き換えに維持率 +5pt を見込む
            Trust Score: この領域は 0.52（Learning レベル）
            不可逆性: 中（一度発表すると撤回は顧客信頼に影響）
            ─────────────────────────
            [承認] [条件付き承認] [差し戻し] [詳細を見る]
[Governor]  ディスカウント率を 10% に抑えて、まず 50 社で試験的に実施しよう。
[System]    条件付き承認として記録しました。
            - 修正: 15% → 10%、対象: 200社 → 50社（試験実施）
            この修正は Memory に学習データとして蓄積されます:
            「価格施策は段階的に展開することを好む」
```

#### Mode 3: Sensemaker Interface（意味付与）

Sensemaker が定量データでは捉えられない質的な現実をシステムに伝えるモード。

```
[Sensemaker] 先日の顧客訪問で気づいたんだけど、Acme 社は表面上は満足しているけど、
             実は CTO が競合の評価を始めている。数値には出ていないはず。
[System]     重要な情報です。現在の世界モデルでは Acme 社の健全性は 85 ですが、
             このシグナルを反映して内部的な警戒レベルを引き上げます。
             以下の対応を提案します:
             1. CTO との直接対話の機会を設定する（Connector に依頼）
             2. Acme 社の利用パターンを詳細分析する（Understanding を強化）
             3. 競合との差別化ポイントを整理する（Reasoning で分析）
             この情報は長期記憶に「人間のセンシングによるアラート」として蓄積します。
```

#### Mode 4: Transparency Interface（透明性）

システムの推論・判断の根拠を人間がいつでも確認できるモード。

```
[Custodian] なぜ顧客 X に対して先週メールを 3 通も送ったの？
[System]    顧客 X への 3 通のメールについて説明します。
            ─────────────────────────
            メール 1（月曜）: UX 改善のリリース通知
              根拠: 顧客 X が報告した問題の修正完了。即時通知が適切と判断
              判断の Trust Score: 0.82（Trusted レベル、自律実行）

            メール 2（水曜）: 新機能の活用提案
              根拠: 顧客 X の利用パターンから、新機能が課題解決に有効と推論
              判断の Trust Score: 0.75（Trusted レベル、自律実行）

            メール 3（金曜）: 四半期レビューの案内
              根拠: 定期レビューのスケジュール
              判断の Trust Score: 0.88（Trusted レベル、自律実行）
            ─────────────────────────
            振り返ると、1 週間に 3 通は多い可能性があります。
            「同一顧客への週次メール上限」を設定しますか？
[Custodian] 2 通を上限にして。重要度が高い場合は例外を認める。
[System]    ルールを設定しました。この学習は Governance のルールとして蓄積されます。
```

#### Mode 5: Command Center（指揮所）

組織知能全体の状態を俯瞰し、必要に応じて介入するモード。

```
[Governor]  組織の現在の状態を見せて。
[System]    ── Neural Organization Status ──
            Purpose: 顧客維持率 95% 達成（現在: 91.2%、+3.2pt / 先月比）

            Layer 状態:
              Perception:    正常（7/7 カテゴリ接続中）
              Understanding: 注意（因果モデルの精度が先月比 -3%）
              Reasoning:     正常（本日 42 件の行動計画を構成）
              Execution:     正常（38 件実行完了、4 件進行中）
              Reflection:    アラート（2 件の予測外れを検出、分析中）

            Governance Gate:
              承認待ち: 3 件（うち 1 件は期限 24h 以内）

            Trust Score 推移: 全体 0.74（先月 0.71、+0.03）
            ─────────────────────────
            [承認待ちを見る] [アラート詳細] [領域別レポート]
```

> 詳細: [docs/philosophy/interface-design.md](docs/philosophy/interface-design.md)
