# Sales Presentation Automator v2 — レベニューサイクル最適化 Agentic AI

> 本ドキュメントは、agentic-ai-sales を「プレゼン資料自動生成 CLI」から「レベニューサイクル全工程（リード獲得 → 商談化 → 提案 → 受注 → CS → アップセル/クロスセル → プロダクトフィードバック）を最適に回す Agentic AI」として再構築する設計を定義する。Neural Organization の思想に完全準拠する。

## 1. 再構築の根拠

### 1.1 現行 v1 の位置づけ

v1 は「SPIN フレームワークに基づくプレゼン資料の自動生成」に焦点を当てている。CLI で顧客情報を入力し、Claude API で 7 枚のスライドを生成し、PPTX を出力する。

しかし、**プレゼン資料の生成はレベニューサイクルの一工程（提案）に過ぎない。** 受注率を最大化するためには、リードの質、商談化の精度、提案の文脈適合性、受注後の顧客成功、そしてそのフィードバックが商材に還元されるサイクル全体を最適化する必要がある。

### 1.2 レベニューサイクルの定義

```
┌───────────────────────────────────────────────────────────────────┐
│                      レベニューサイクル                              │
│                                                                   │
│  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐                  │
│  │ リード  │─→│ 商談化 │─→│  提案  │─→│  受注  │                  │
│  │ 獲得   │  │        │  │        │  │        │                  │
│  └────────┘  └────────┘  └────────┘  └────────┘                  │
│       ▲                                    │                      │
│       │                                    ▼                      │
│  ┌────────────┐  ┌────────────┐  ┌────────────────┐              │
│  │ プロダクト  │←─│ アップセル  │←─│      CS        │              │
│  │ フィードバック│  │ クロスセル │  │（顧客成功）     │              │
│  └────────────┘  └────────────┘  └────────────────┘              │
│                                                                   │
└───────────────────────────────────────────────────────────────────┘
```

### 1.3 各工程の最適化目標

| # | 工程 | 最適化目標 | KPI |
|---|---|---|---|
| 1 | **リード獲得** | LTV/CAC の最大化 | CAC、リード品質スコア、チャネル別 ROAS |
| 2 | **商談化** | 商談化率の最大化 | リード→商談転換率、商談化リードタイム |
| 3 | **提案** | 再現性の確保（誰でも・入社後すぐ） | 提案品質スコア、準備時間、新人の初受注までの日数 |
| 4 | **受注** | 受注率の最大化 | 受注率、平均受注単価、リードタイム |
| 5 | **CS** | 契約期間の長期化 | 解約率、NPS、顧客健全性スコア |
| 6 | **アップセル/クロスセル** | 適切なタイミング × 適切な商材 × 適切な価格 × 適切な表現 | エクスパンション率、ARPU 成長率 |
| 7 | **プロダクトフィードバック** | 適切なプロダクトへの還元 | 機能要望の反映率、フィードバック起因の受注数 |

### 1.4 v1 のプレゼン生成の再配置

v1 の SPIN プレゼン生成は消えるのではなく、**工程 3（提案）の Execution ツール**として再配置される。00_concept.md の 100 点設計は、この工程の詳細設計としてそのまま活用する。

## 2. 5 層アーキテクチャへのマッピング

```
 Purpose ────────────────────────────────── Governance
 (事業計画: 売上目標 + GTM 戦略               (Trust Score × ゲート)
  + ICP 定義 + 価値提案)                         │
        │                                       │
        ▼                                       │
┌──────────────────────────────────────────────────────────┐
│  L0: Perception（知覚）                                    │
│  ● リードデータ取得（マーケ施策、Web行動、インバウンド）      │
│  ● CRM パイプラインデータ（商談ステージ、活動履歴）          │
│  ● プロダクト利用データ（利用状況、機能活用率、ログイン頻度）│
│  ● 顧客の声（サポートチケット、NPS、問い合わせ）            │
│  ● 市場データ（ai-exec-dashboard: 競合動向、業界トレンド）  │
├──────────────────────────────────────────────────────────┤
│  L1: Understanding（理解）                                 │
│  ● リードスコアリング（ICP 適合度 × エンゲージメント）       │
│  ● 顧客ジャーニーマッピング（現在のステージ + 次の転換点）   │
│  ● 顧客健全性スコアリング（利用状況 × 満足度 × 成長性）     │
│  ● 解約リスク予測（行動シグナル + 感情シグナル）             │
│  ● プロダクトフィードバック構造化（要望分類 + 優先度）       │
├──────────────────────────────────────────────────────────┤
│  L2: Reasoning（推論）                                     │
│  ● リード優先度判断（LTV/CAC 最適化）                       │
│  ● 商談戦略立案（ステージ別の最適アプローチ）                │
│  ● 提案戦略（フレームワーク選択 + ストーリー構成）           │
│  ● 価格戦略（顧客価値 × 市場環境 × 競合状況）              │
│  ● アップセル/クロスセル機会特定（タイミング × 商材 × 表現） │
│  ● プロダクトロードマップ提案（フィードバック → 機能優先度） │
├──────────────────────────────────────────────────────────┤
│  L3: Execution（実行）                                     │
│  ● プレゼン資料生成（← v1 の SPIN 生成がここ）              │
│  ● 提案書・見積書生成                                      │
│  ● アウトリーチメール/メッセージ生成                        │
│  ● CS コミュニケーション生成                                │
│  ● プロダクトフィードバックレポート生成                     │
├──────────────────────────────────────────────────────────┤
│  L4: Reflection（内省）                                    │
│  ● Win/Loss 分析（受注/失注の要因分析）                     │
│  ● 提案効果測定（どのスライド/メッセージが効果的だったか）   │
│  ● CS 施策効果測定（解約防止/エクスパンションの実績）        │
│  ● 勝ちパターン/負けパターンの自動抽出 → Knowledge 更新     │
│  ● フィードバック→プロダクト反映の追跡                      │
└──────────────────────────────────────────────────────────┘
       ▲                                      ▲
  Memory                                 Orchestration
  ● 長期: 勝ち/負けパターン辞書         ● パイプライン駆動
        + 顧客エンティティモデル          （ステージ変化がトリガー）
        + ICP プロファイル               ● CS サイクル（月次/四半期）
  ● 作業: 進行中の商談文脈              ● アラート駆動
  ● 評価: 受注率推移、解約率推移           （解約リスク検知等）
```

## 3. エージェント設計

### 3.1 エージェント一覧

レベニューサイクルの 7 工程 + 内省に対応する 10 のエージェント。

```
【リード獲得 + 商談化】
  Agent 1: LeadIntelligenceAgent        リードスコアリング + 優先度判断
  Agent 2: OutreachAgent                初回アプローチの最適化

【提案 + 受注】
  Agent 3: DealStrategyAgent            商談戦略の立案
  Agent 4: ProposalAgent                提案資料生成（v1 の SPIN 生成を内包）
  Agent 5: PricingAgent                 価格戦略の最適化

【CS + アップセル/クロスセル】
  Agent 6: CustomerHealthAgent          顧客健全性の監視
  Agent 7: ExpansionAgent               アップセル/クロスセル機会の特定 + 提案

【プロダクトフィードバック】
  Agent 8: ProductFeedbackAgent         顧客の声 → プロダクトロードマップへの還元

【実行支援】
  Agent 9: ContentGeneratorAgent        全工程のコンテンツ生成（メール、資料、レポート）

【内省】
  Agent 10: RevenueCycleReflectionAgent  Win/Loss 分析 + パターン学習 + 予測モデル更新
```

### 3.2 各エージェントの詳細設計

#### Agent 1: LeadIntelligenceAgent（リード獲得 — 知覚 + 理解）

```
役割: リードをスコアリングし、LTV/CAC を最大化する優先順位を決定する

入力:
  ● リードデータ（マーケ施策経由、Web 行動、インバウンド問い合わせ）
  ● ICP 定義（Purpose から設定: 理想顧客像）
  ● Memory: 過去の受注顧客プロファイル + 勝ちパターン

処理:
  1. ICP 適合度スコアリング:
     ┌──────────────────────────────────┐
     │ ICP Score = Σ(適合因子 × 重み)   │
     │                                  │
     │ 適合因子:                         │
     │   業種適合:    0.25              │
     │   規模適合:    0.20              │
     │   課題適合:    0.30              │
     │   予算規模:    0.15              │
     │   意思決定速度: 0.10              │
     └──────────────────────────────────┘

  2. エンゲージメントスコアリング:
     - Web 行動（ページ閲覧、資料DL、セミナー参加）
     - メール開封/クリック
     - インバウンドの緊急度

  3. LTV/CAC 予測:
     - 推定 LTV = ICP Score × 業界平均単価 × 推定契約期間
     - 推定 CAC = チャネル別獲得コスト + 営業工数
     - LTV/CAC 比 → 優先度ランキング

  4. チャネル別 ROAS 分析:
     - 各マーケ施策の投資対効果を算出
     - 低 ROAS チャネルからのリードは優先度を下げる

出力:
  ● LeadPriorityList:
    - リード一覧（優先度順）
    - 各リードの ICP Score + LTV/CAC 予測
    - 推奨アプローチ方法

HITL Gate: なし（スコアリングは自律実行）
  ※ ただし ICP 定義の変更は Governor 承認
```

#### Agent 2: OutreachAgent（商談化 — 推論 + 実行）

```
役割: 商談化率を最大化する最適なファーストアプローチを設計・実行する

入力:
  ● LeadPriorityList（Agent 1）
  ● リード別のコンテキスト（企業情報、接点履歴、Web 行動）
  ● Memory: 過去のアプローチ方法別の商談化率

処理:
  1. アプローチ方法の選定:
     - メール / 電話 / LinkedIn / セミナー招待 / 紹介依頼
     - リードの行動パターンから最適チャネルを推定
     - Memory から「この ICP セグメントで最も商談化率が高いチャネル」を参照

  2. メッセージのパーソナライゼーション:
     - 企業の課題仮説（ICP 分析から推定）
     - 直近の行動（「先日○○のセミナーにご参加いただき...」）
     - 同業界の事例引用（Memory の勝ちパターンから）

  3. タイミングの最適化:
     - 曜日 × 時間帯の開封率データ（Memory）
     - リードの行動パターンに基づく最適送信時刻

  4. フォローアップシーケンスの設計:
     - 初回→1週間後→2週間後の 3 ステップ
     - 各ステップで異なる角度のメッセージ

出力:
  ● OutreachPlan:
    - リード別のアプローチ計画（チャネル × タイミング × メッセージ）
    - 生成されたメール/メッセージのドラフト

HITL Gate: OUTREACH_PLAN
  Governor の問い: 「このアプローチ計画で進めてよいですか？」
  ※ Trust Score が Trusted 以上の場合、定型的なアウトリーチは自動実行
```

#### Agent 3: DealStrategyAgent（提案 — 推論）

```
役割: 各商談のステージに応じた最適な戦略を立案する

入力:
  ● 商談データ（CRM: ステージ、金額、競合、キーパーソン、活動履歴）
  ● 顧客の課題仮説（Agent 1 の分析 + 営業の入力）
  ● Memory: 勝ちパターン辞書 + 失注パターン辞書
  ● 市場データ（ai-executive-dashboard: 競合の動向）

処理:
  1. 商談ステージ分析:
     ┌───────────────────────────────────────────────┐
     │ ステージ  │ 次のマイルストーン │ 推奨アクション │
     │───────────┼──────────────────┼──────────────│
     │ 初回接触  │ 課題の合意        │ SPIN ヒアリング│
     │ 課題合意  │ 提案機会の獲得    │ 影響度の定量化 │
     │ 提案中   │ 意思決定者の合意   │ ROI 提案      │
     │ 交渉中   │ 契約締結          │ 条件最適化    │
     └───────────────────────────────────────────────┘

  2. 勝ちパターンとの照合:
     - Memory から「同業界 × 同規模 × 同ステージ」の成功事例を検索
     - 共通する成功要因を抽出（例: 「CTO の直接関与があると受注率 2 倍」）

  3. リスク分析:
     - 失注パターンとの照合（例: 「3 週間以上進展なし → 70% で失注」）
     - 競合状況の評価（ai-executive-dashboard のデータ活用）

  4. フレームワーク選択:
     - SPIN（1 次商談向け）← v1 のスコープ
     - BANT（予算確認向け）
     - MEDDIC（大型案件向け）
     - 問題解決型（詳細提案向け）
     → 商談のステージ × 規模 × 複雑性から最適フレームワークを推奨

出力:
  ● DealStrategy:
    - ステージ別アクション計画
    - フレームワーク推奨（提案時に Agent 4 が使用）
    - リスクと対策
    - 必要な社内リソース（SE、マネージャー同行等）

HITL Gate: DEAL_STRATEGY
  Governor の問い: 「この商談戦略を承認しますか？追加すべき戦術はありますか？」
```

#### Agent 4: ProposalAgent（提案 — 実行）

**v1 の SPIN プレゼン生成を内包し、全フレームワークに拡張。**

```
役割: 商談戦略に基づいて、最適な提案資料を生成する

入力:
  ● DealStrategy（Agent 3: フレームワーク推奨 + 戦略）
  ● 顧客情報（CRM + 手動入力）
  ● Memory: 勝ちパターン（受注に至った提案の要素）
  ● [新規] 市場データ（ai-executive-dashboard: 業界トレンド → 提案の文脈付け）
  ● [新規] 等級データ（agentic-ai-hr: 営業担当者のスキルレベルに応じた支援度調整）

処理:
  1. v1 の 6 段階パイプライン（00_concept.md）の実行:
     INPUT → PLANNING → CONTENT → DESIGN → QUALITY → OUTPUT

  2. [新規] フレームワークの動的選択:
     - DealStrategy が推奨したフレームワーク（SPIN / BANT / MEDDIC 等）を適用
     - v1 は SPIN のみ → v2 は 6 フレームワーク対応

  3. [新規] 再現性の確保（誰でも・入社後すぐ）:
     - スピーカーノートに「なぜこのスライドか」「どう話すか」の詳細ガイド
     - 想定 Q&A の自動生成
     - 営業担当者のスキルレベルに応じた支援度調整:
       ジュニア → 詳細なスピーカーノート + ロールプレイ用スクリプト
       シニア → 要点のみ + カスタマイズ余地を広く

  4. [新規] 品質チェック（design.md §1.4 準拠）:
     - 基準適合: ブランドガイドライン、禁止表現チェック
     - 論理整合性: 数値の根拠、ストーリーの一貫性
     - 安全性: 機密情報、法的リスク、競合誹謗中傷
     - 最適化: 相手のロール（CTO / CFO / 現場）に応じた表現調整

出力:
  ● ProposalPackage:
    - プレゼン資料（PPTX / Google Slides / PDF）
    - スピーカーノート
    - 想定 Q&A 集
    - 競合比較表
    - 付随資料リンク集

HITL Gate: PROPOSAL_REVIEW
  Governor の問い: 「この提案資料を顧客に提示してよいですか？」
  ※ Trust Score が Trusted 以上 + ジュニア向けの定型提案は自動パス
```

**v1 資産の活用:**
- `models.py` の全モデル（CustomerInfo, DealContext, SlideContent, PresentationContent）を継承
- `llm_client.py` の Claude API 統合を継承
- `pptx_generator.py` の PPTX 生成エンジンを継承
- `data/prompts/slide_generation.yaml` の SPIN プロンプトを継承 + 他フレームワーク用を追加
- `cli.py` の対話型入力を Web UI に移行（将来）

#### Agent 5: PricingAgent（受注 — 推論）

```
役割: 受注率を最大化する価格戦略を設計する

入力:
  ● 商談データ（金額、競合、顧客の予算感）
  ● Memory: 過去の価格別受注率 + 値引き幅と受注率の相関
  ● 市場データ（競合の価格体系）

処理:
  1. 価格感度分析:
     - 顧客の予算規模と自社価格の乖離
     - 競合との価格比較
     - 顧客が得る ROI の推定

  2. 最適価格帯の推定:
     ┌──────────────────────────────────────────┐
     │ 推奨価格: ¥XXX万/年                       │
     │                                          │
     │ 根拠:                                    │
     │  ● 顧客の推定 ROI: ¥YYY万/年 → ROI 3.2x │
     │  ● 同セグメントの平均受注単価: ¥ZZZ万     │
     │  ● 競合 A 社の同等プラン: ¥WWW万          │
     │  ● 値引きなしでの受注確率: 65%            │
     │  ● 10% 値引き時の受注確率: 82%            │
     └──────────────────────────────────────────┘

  3. 契約条件の最適化:
     - 年間契約 vs. 月次契約の LTV 比較
     - バンドル提案（複数商材の組み合わせ割引）
     - 段階的導入プラン（小さく始めて拡大）

出力:
  ● PricingStrategy:
    - 推奨価格 + 根拠
    - 値引き戦略（条件付き値引きのシナリオ）
    - 契約条件の推奨

HITL Gate: PRICING_STRATEGY
  Governor の問い: 「この価格戦略を承認しますか？」
  ※ 値引き率が 20% を超える場合は必ず Governor 承認
```

#### Agent 6: CustomerHealthAgent（CS — 知覚 + 理解）

```
役割: 顧客の健全性を継続的に監視し、解約リスクを予測する

入力:
  ● プロダクト利用データ（ログイン頻度、機能活用率、API コール数）
  ● サポートデータ（チケット数、応答時間、未解決チケット）
  ● NPS / CSAT スコア
  ● 契約データ（更新日、金額、契約期間）
  ● Memory: 過去の解約パターン

処理:
  1. 顧客健全性スコアの算出:
     Health Score = 利用度×0.30 + 満足度×0.25 + サポート状況×0.20
                  + 契約状況×0.15 + 成長性×0.10

  2. 顧客満足度の多面的評価:
     ┌───────────────────────────────────────────────────┐
     │ 満足度 = f(ROI, 心理的満足度, 解約リスク)          │
     │                                                   │
     │ ROI:       期待した効果が実現されているか           │
     │ 心理的満足: 対応の速さ × 正確さ × プラスαの価値提供│
     │ 解約リスク: 解約した場合に発生するリスクの大きさ     │
     │            （データ移行コスト、業務停止リスク等）    │
     └───────────────────────────────────────────────────┘

  3. 解約リスク予測:
     - 行動シグナル: ログイン頻度の低下、機能活用率の低下
     - 感情シグナル: サポートチケットのトーン分析、NPS の低下
     - 契約シグナル: 更新日の接近 + 未解決の課題
     - Memory: 過去に解約した顧客との行動パターンの類似度

  4. アラート発行:
     - Health Score < 60 → CS チームにアラート
     - 解約リスク > 70% → 即時対応レコメンド

出力:
  ● CustomerHealthDashboard:
    - 全顧客の Health Score 一覧
    - 解約リスク上位リスト
    - 顧客別の推奨アクション

HITL Gate: なし（監視は自律実行。ただしアラートの閾値変更は Governor 承認）
```

#### Agent 7: ExpansionAgent（アップセル/クロスセル — 推論）

```
役割: 適切なタイミングで適切な顧客に適切な商材を適切な価格で適切な表現で提案する

入力:
  ● CustomerHealthDashboard（Agent 6: 健全な顧客の特定）
  ● プロダクト利用データ（活用度の高い/低い機能）
  ● 契約データ（現在のプラン、利用量、上限への接近度）
  ● Memory: 過去のアップセル成功パターン

処理:
  1. 機会の特定:
     ┌───────────────────────────────────────────────────────┐
     │ 適切なタイミング:                                      │
     │   ● 利用量が契約上限の 80% に到達                      │
     │   ● 新機能リリースが顧客の課題に合致                    │
     │   ● 契約更新の 3 ヶ月前（契約見直しの自然なタイミング） │
     │   ● 顧客の組織変更・事業拡大のシグナル                  │
     │                                                       │
     │ 適切な商材:                                            │
     │   ● 利用パターンから推定される未活用の価値領域           │
     │   ● 顧客の業種 × 規模で高活用率の機能                  │
     │                                                       │
     │ 適切な価格:                                            │
     │   ● 現在の利用から得ている ROI に基づくアップセル余地    │
     │   ● 競合の同等プランとの比較                            │
     │                                                       │
     │ 適切な表現:                                            │
     │   ● 「売り込み」ではなく「顧客の成功を加速する提案」     │
     │   ● 具体的な ROI シミュレーション付き                   │
     └───────────────────────────────────────────────────────┘

  2. 提案の構成:
     - Agent 4（ProposalAgent）にアップセル提案の資料生成を依頼
     - Agent 9（ContentGeneratorAgent）にメール/メッセージの生成を依頼

  3. 優先度付け:
     - 拡大確度 × 拡大金額 × 顧客健全性 でランキング

出力:
  ● ExpansionOpportunityList:
    - 顧客別の機会一覧（タイミング × 商材 × 価格 × 表現）
    - 優先度ランキング
    - 推奨アプローチ方法

HITL Gate: EXPANSION_PLAN
  Governor の問い: 「このアップセル/クロスセル計画を承認しますか？」
```

#### Agent 8: ProductFeedbackAgent（フィードバック — 理解 + 推論）

```
役割: 顧客の声をプロダクトロードマップに構造化して還元する

入力:
  ● サポートチケット（機能要望タグ付き）
  ● 失注理由（Agent 10 の Win/Loss 分析）
  ● 顧客インタビュー記録
  ● NPS の自由記述

処理:
  1. フィードバックの構造化:
     - 既存機能の改善要望 → 機能別に集約 + 要望数でランキング
     - 新規機能の要望 → 課題カテゴリに分類
     - 新規ソリューションの示唆 → 事業機会として抽出

  2. 優先度スコアリング:
     Priority = 要望数×0.25 + 影響顧客のARR合計×0.30
              + 受注/解約への影響度×0.30 + 実装コスト効率×0.15

  3. プロダクトチームへのレポート生成:
     ┌───────────────────────────────────────────────┐
     │ プロダクトフィードバックレポート — 2025年Q4     │
     │                                               │
     │ 🔴 Critical（失注/解約に直結）:               │
     │   1. API レート制限の緩和（5社が要望、失注2件）│
     │   2. SSO 対応（エンタープライズの必須条件）     │
     │                                               │
     │ 🟡 High（受注率/満足度に影響）:               │
     │   3. ダッシュボードのカスタマイズ機能          │
     │   4. Slack 通知の柔軟化                       │
     │                                               │
     │ 💡 機会（新規ソリューション候補）:             │
     │   5. 業界特化テンプレート（3社から同一要望）    │
     └───────────────────────────────────────────────┘

出力:
  ● ProductFeedbackReport:
    - 優先度付きフィードバック一覧
    - 受注/解約との相関分析
    - 推奨アクション

HITL Gate: PRODUCT_FEEDBACK
  Governor の問い: 「このフィードバックレポートをプロダクトチームに共有してよいですか？」
```

#### Agent 9: ContentGeneratorAgent（実行 — 全工程支援）

```
役割: レベニューサイクル全工程で必要なコンテンツを生成する

対応する生成物:
  ● アウトリーチメール（Agent 2 の依頼）
  ● 提案資料（Agent 4 の依頼 — v1 のPPTX生成を内包）
  ● 見積書（Agent 5 の依頼）
  ● CS コミュニケーション（Agent 6 の依頼: 対応メール、フォローアップ）
  ● アップセル提案資料（Agent 7 の依頼）
  ● プロダクトフィードバックレポート（Agent 8 の依頼）

品質チェック（全生成物に共通 — design.md §1.4 準拠）:
  1. 基準適合: ブランドガイドライン、フォーマット、禁止表現
  2. 論理整合性: 数値の正確性、ストーリーの一貫性
  3. 安全性: 機密情報、法的リスク
  4. 最適化: 受け手に合わせた表現・粒度・チャネル

HITL Gate: 生成物の種類と Trust Score に応じて動的
  ● 対外的なコンテンツ（メール、提案書）: HITL 必須（Cold Start/Learning）
  ● 社内レポート: 自動パス可能（Learning 以上）
```

#### Agent 10: RevenueCycleReflectionAgent（内省 — 最重要）

```
役割: レベニューサイクル全体の学習ループを駆動する

入力:
  ● 全商談の結果（受注/失注/進行中）
  ● 提案資料の使用実績 + 顧客の反応
  ● CS の施策と結果（解約防止の成否、エクスパンションの成否）
  ● 全 HITL 修正履歴

処理:
  1. Win/Loss 分析:
     ┌───────────────────────────────────────────────┐
     │ 受注分析（今月 12 件受注）:                     │
     │  ● 共通パターン: CTO との直接接点が全件にあり   │
     │  ● 有効な提案要素: ROI 定量化スライド（10/12件）│
     │  ● 平均リードタイム: 45 日（前月比 -8 日）      │
     │                                               │
     │ 失注分析（今月 8 件失注）:                      │
     │  ● 共通パターン: 価格交渉で敗退 5 件           │
     │  ● 競合 A 社に 3 件流出（価格差が主因）         │
     │  ● 改善機会: 初期段階での ROI 訴求が不足        │
     └───────────────────────────────────────────────┘

  2. 勝ちパターン/負けパターンの自動抽出:
     - 受注商談の共通特徴を自動的に抽出 → Knowledge に蓄積
     - 失注商談の共通パターンを自動的に抽出 → アンチパターンとして蓄積
     - これらが Agent 3（DealStrategy）と Agent 4（Proposal）の入力になる

  3. 提案効果測定:
     - 「どのスライドが顧客の反応を引き出したか」の分析
     - 「どのメッセージが開封/クリックされたか」の分析
     - → v1 の 00_concept.md §8 の FEEDBACK LOOP の実装

  4. 予測モデルの更新:
     - リードスコアリングモデルの精度検証 → 更新
     - 解約リスク予測モデルの精度検証 → 更新
     - アップセル確度モデルの精度検証 → 更新

  5. HITL 修正パターンの分析:
     - 「マネージャーが提案書の価格表現を毎回修正する」
       → 学習: 価格訴求は直接的ではなく ROI ベースで表現すべき
     - 「Governor がアウトリーチメールのトーンを柔らかくする」
       → 学習: この組織のコミュニケーションスタイルはカジュアル

出力:
  ● RevenueCycleReflectionReport:
    - Win/Loss 分析サマリー
    - 勝ち/負けパターンの更新内容
    - 予測モデルの精度報告 + 更新内容
    - HITL 学習内容
  ● Memory 更新:
    - 長期記憶: 勝ち/負けパターン辞書 + ICP プロファイル更新
    - 評価記憶: 受注率推移、解約率推移、各モデルの精度推移

HITL Gate: REFLECTION_REVIEW（四半期レビュー時のみ）
  Governor の問い: 「この分析結果と学習内容を承認しますか？戦略の転換が必要ですか？」
```

## 4. 顧客エンティティモデル

design.md §1.2 の Customer エンティティを、本プロダクト固有の粒度に拡張する。

```typescript
interface CustomerEntity {
  // 基本属性
  id: string;
  companyName: string;
  industry: Industry;
  companySize: CompanySize;
  url?: string;

  // ジャーニーステージ
  stage: 'lead' | 'opportunity' | 'customer' | 'churned';

  // リード段階
  leadScore?: {
    icpFitScore: number;      // 0-100
    engagementScore: number;  // 0-100
    estimatedLTV: number;     // 円
    estimatedCAC: number;     // 円
    ltvCacRatio: number;
  };

  // 商談段階
  deals?: Deal[];

  // 顧客段階
  healthScore?: number;       // 0-100
  nps?: number;
  contractEndDate?: Date;
  currentARR?: number;
  expansionPotential?: number;
  churnRisk?: number;         // 0-100

  // 関係性
  keyPersons: KeyPerson[];
  csManager?: string;
  salesRep?: string;

  // 行動データ
  productUsage?: ProductUsage;
  supportTickets?: SupportSummary;

  // フィードバック
  featureRequests?: FeatureRequest[];

  // Memory リンク
  winPatterns?: string[];     // 受注に至ったパターンID
  lossPatterns?: string[];    // 失注パターンID
}
```

## 5. Memory 設計

### 5.1 3 構造の内容

| 構造 | 内容 | 技術 |
|---|---|---|
| **長期記憶** | 勝ち/負けパターン辞書、ICP プロファイル、顧客エンティティモデル、業界別ベストプラクティス、提案テンプレートライブラリ | PostgreSQL + ベクトル DB（セマンティック検索用）|
| **作業記憶** | 進行中の商談文脈、作成中の提案資料の状態、HITL 待ち | Redis |
| **評価記憶** | 受注率推移、解約率推移、各スコアリングモデルの精度推移、チャネル別 ROAS 推移 | PostgreSQL（時系列）|

### 5.2 勝ちパターン辞書の例

```yaml
pattern_id: "wp-saas-50-cto"
name: "SaaS中規模・CTO直接商談パターン"
conditions:
  industry: "IT・ソフトウェア"
  company_size: "51-300名"
  key_person_role: "CTO"
success_factors:
  - "初回商談でCTOと直接対話"
  - "ROI定量化スライドを提示"
  - "同業界の具体的事例を2件以上提示"
  - "技術的なデモを含む"
anti_patterns:
  - "営業のみで技術者が不在"
  - "価格から入る"
average_deal_size: 5000000
average_lead_time_days: 42
win_rate: 0.68
sample_count: 15
last_updated: "2025-W41"
```

## 6. Governance 設計

### 6.1 HITL ゲート一覧

| Gate ID | ゲート名 | エージェント | 承認者 | 不可逆性 |
|---|---|---|---|---|
| RC-001 | OUTREACH_PLAN | Agent 2 | 営業マネージャー | 中（対外送信） |
| RC-002 | DEAL_STRATEGY | Agent 3 | 営業マネージャー | 低 |
| RC-003 | PROPOSAL_REVIEW | Agent 4 | 営業マネージャー | 高（対外提示） |
| RC-004 | PRICING_STRATEGY | Agent 5 | Governor（経営層） | 高（価格コミット） |
| RC-005 | EXPANSION_PLAN | Agent 7 | CS マネージャー | 中 |
| RC-006 | PRODUCT_FEEDBACK | Agent 8 | プロダクトマネージャー | 低 |
| RC-007 | REFLECTION_REVIEW | Agent 10 | Governor | 低 |

### 6.2 Trust Score の適用

| 因子 | 測定方法 |
|---|---|
| 成功率 | 提案が修正なしで承認された割合 |
| 結果品質 | 提案→受注の転換率、予測精度 |
| 整合性 | 提案が GTM 戦略・ブランドガイドラインと整合している割合 |
| リスク管理 | 禁止表現・機密情報漏洩をエスカレーションした割合 |

## 7. 共有記憶基盤への接続

### 7.1 書き込み（他プロジェクトに提供するデータ）

| データ | 消費者 | 活用例 |
|---|---|---|
| 受注/失注データ | ai-executive-dashboard | 経営ダッシュボードの売上セクション |
| 顧客健全性データ | ai-executive-dashboard | 経営レポートの顧客基盤セクション |
| プロダクトフィードバック | （プロダクトチーム） | ロードマップの優先度判断 |
| 営業活動データ | neumann | 経営管理サイクルの KPI 実績入力 |

### 7.2 読み出し（他プロジェクトから取得するデータ）

| データ | 提供元 | 活用例 |
|---|---|---|
| 市場トレンド | ai-executive-dashboard | 提案の文脈付け（「業界では〜」）|
| 等級データ | agentic-ai-hr | 営業担当者のスキルレベルに応じた支援度調整 |
| 報告品質データ | neumann | 営業マネージャーの報告品質 → 商談管理の精度指標 |

## 8. v1 資産の活用マップ

| v1 資産 | v2 での活用 | 変更の程度 |
|---|---|---|
| `models.py` | Agent 4（ProposalAgent）がそのまま使用 | ScenarioType の拡張のみ |
| `cli.py` | 将来 Web UI に移行。Phase 1 は CLI を維持 | Web UI 追加時に非推奨化 |
| `llm_client.py` | Agent 9（ContentGeneratorAgent）が継承 | マルチモデル対応を追加 |
| `pptx_generator.py` | Agent 9 の出力モジュールとして継続 | Google Slides / PDF 追加 |
| `data/prompts/slide_generation.yaml` | Agent 4 の SPIN テンプレートとして継続 | 他フレームワーク用を追加 |
| `config/settings.yaml` | 設定の基盤として継続 | 全エージェントの設定を追加 |
| `00_concept.md` | Agent 4 の詳細設計書として継続 | v2 でも有効な 100 点設計 |
| `01_pipeline_detail.md` | Agent 4 の 6 段階パイプライン仕様として継続 | 変更なし |
| `02_data_sources.md` | Agent 1 + Agent 9 のデータソース設計として継続 | 変更なし |

## 9. 実装ロードマップ

### Phase 1: 提案エンジンの完成（3-4 週）

v1 のスコープを完了させ、Agent 4 + Agent 9 のコアを確立する。

- 複数フレームワーク対応（SPIN + BANT + MEDDIC）
- スピーカーノートの充実（再現性の確保）
- 想定 Q&A 自動生成
- 品質チェック実装（4 段階）
- DB 導入（SQLite → PostgreSQL）

### Phase 2: 商談戦略 + Win/Loss（3-4 週）

Agent 3 + Agent 10 の実装。

- DealStrategyAgent（商談ステージ分析 + 戦略立案）
- RevenueCycleReflectionAgent（Win/Loss 分析 + パターン学習）
- 勝ち/負けパターン辞書の構築
- Memory の長期記憶実装

### Phase 3: リード + 商談化（3-4 週）

Agent 1 + Agent 2 の実装。

- LeadIntelligenceAgent（スコアリング + LTV/CAC 予測）
- OutreachAgent（アプローチ最適化）
- CRM 連携（Salesforce / HubSpot）

### Phase 4: CS + エクスパンション（3-4 週）

Agent 6 + Agent 7 の実装。

- CustomerHealthAgent（健全性監視 + 解約リスク予測）
- ExpansionAgent（アップセル/クロスセル機会特定）
- プロダクト利用データ連携

### Phase 5: プロダクトフィードバック + 共有記憶（2-3 週）

Agent 5 + Agent 8 の実装 + 共有記憶基盤接続。

- PricingAgent（価格戦略最適化）
- ProductFeedbackAgent（フィードバック→ロードマップ還元）
- ai-executive-dashboard / neumann との接続
